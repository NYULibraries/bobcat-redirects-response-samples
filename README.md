# bobcat-redirects-response-samples

Response samples generated by the [bobcat\-redirects\-sampler](https://github.com/NYULibraries/bobcat-redirects-sampler)

## Test case group: libguides

monday.com ticket: [On Jan 3, deploy bobcat\-redirect updates based on test of LibGuides permalinks](https://nyu-lib.monday.com/boards/765008773/pulses/5673747001?userId=27226106)

Built an EC2 with binaries for both old and new `bobcat-redirects` versions running
on two different ports and ran the sampler on that machine against these local
services.  The old version process died multiple times for unknown reasons and
had to be restarted (response samples and screenshots were cleaned before resumption
of sampling).  The new version with its resiliency enhancements was stable
throughout.

Note that there are failure screenshots for both services showing at least partial
loading of detail records.  These are apparently false positives which could have
resulted from the success indicator HTML not loading in time.

* [bobcat\-redirects\-sampler](https://github.com/NYULibraries/bobcat-redirects-sampler) version: [247ee4a5006921f70e2d109a10e7d4a0e35ca7d4](https://github.com/NYULibraries/bobcat-redirects-sampler/tree/247ee4a5006921f70e2d109a10e7d4a0e35ca7d4)
* [bobcat-redirects](https://github.com/NYULibraries/bobcat-redirects)
  * `BobcatRedirects` service (tip of `main` branch at the time of the sampling): [674344837797c579eca13c0f0dd646066d4a19ef](https://github.com/NYULibraries/bobcat-redirects/tree/674344837797c579eca13c0f0dd646066d4a19ef)
  * `BobcatRedirectsNewVersion` service (tip of `add-datasources-and-enhance-lookup` branch at the time of the sampling): [fe09839ff1bcd8c6a1f0ab4a6bfb2782100c2ca4](https://github.com/NYULibraries/bobcat-redirects/tree/fe09839ff1bcd8c6a1f0ab4a6bfb2782100c2ca4)

## Test case group: libguides-failed-primo-ve

The permalink paths that failed in the "libguides" test case group were sampled using https://bobcatdev.library.nyu.edu, which is not technically a `bobcat-redirects` instance, but in order to get the sample data quickly we treated it as such.

The initial sampling was done in 3 batches.  Causes of need for restart/resume not currently known.
See "libguides" test case group explanation for why we split into multiple batches instead of resuming the sampling against the full test case group.

After the first full pass through all test cases, there were 7 cases that were retried because the failure screenshots showed white screens of death which suggested that the 2 minute timeout was too short for those requests.  The timeout for the retry pass was 5 minutes.  Even with that extended timeout, 3 samples still failed.  All 3 URLs were tested manually and redirected to https://bobcatdev.library.nyu.edu/primo-explore/, which responds with a white screen with loading diamonds and no subsequent loading of content.  This is expected, since it appears that that endpoint requires at minimum, "search?vid=[VID]".

The response sample HTML files, failure screenshots, and _index.json_ files
were merged to appear as if a single batch or multiple batches in "resume" mode
were run.

* [bobcat\-redirects\-sampler](https://github.com/NYULibraries/bobcat-redirects-sampler) commit: [e5c2e128c8739fb78ade15f43aabdd6784480d30](https://github.com/NYULibraries/bobcat-redirects-sampler/tree/e5c2e128c8739fb78ade15f43aabdd6784480d30)

## Test case group: libguides-succeeded-primo-ve

The permalink paths that succeeded in the "libguides" test case group were sampled using https://bobcatdev.library.nyu.edu, which is not technically a `bobcat-redirects` instance, but in order to get the sample data quickly we treated it as such.

This is the first test group using the new sampler code which records an entry for failures in the _index.json_ file in order to do a convenient resume of an interrupted batch.  Interruptions occurred for this sampling run due to dev BobCat outages caused by a ConEd power issue, and to a bug in the sampler where in the rare event of a playwright screenshot failure an uncaught runtime error terminated the sampling.  This sampler bug was fixed in the middle of this test case group job, which is why there is more than one commit associated with this sampling group.

* [bobcat\-redirects\-sampler](https://github.com/NYULibraries/bobcat-redirects-sampler) commit(s):
  * [500cc9149520216e153f5ac38cc27e80a72f41eb](https://github.com/NYULibraries/bobcat-redirects-sampler/tree/500cc9149520216e153f5ac38cc27e80a72f41eb)
  * [dead13b5fce82816ab28d9037229a1770fe0049f](https://github.com/NYULibraries/bobcat-redirects-sampler/tree/dead13b5fce82816ab28d9037229a1770fe0049f)
